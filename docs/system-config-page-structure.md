# システム設定管理ページ構成

## 概要

選考段階、固定タスク、ステータス項目を管理画面で設定できるようにするためのページ構成設計。

## ページ構成

```
/system-config/
├── index                     # システム設定トップ
├── stages                    # 選考段階管理
├── stages/:stageId/tasks     # 特定段階のタスク管理
└── stages/:stageId/statuses  # 特定段階のステータス管理
```

## 1. システム設定トップページ

**URL**: `/system-config`  
**ファイル**: `src/features/system-config/pages/SystemConfigIndexPage.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ システム設定                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 選考段階管理                                          │
│     選考段階の追加・編集・順序変更                          │
│     [設定する →]                                         │
│                                                         │
│  ⚡ クイック設定                                          │
│     よく使用される設定の一括適用                          │
│     [テンプレート適用]                                    │
│                                                         │
│  🔧 システム状態                                          │
│     現在の設定サマリーと整合性チェック                      │
│     [整合性チェック実行]                                   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 機能
- 各設定項目への入り口
- 設定状態のサマリー表示
- クイック設定テンプレート

## 2. 選考段階管理ページ

**URL**: `/system-config/stages`  
**ファイル**: `src/features/system-config/pages/StageConfigPage.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ 選考段階管理                                    [+ 新規追加] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🔵 エントリー              [↑][↓] [編集] [タスク] [削除]   │
│      グループ: エントリー    ✅ アクティブ                   │
│                                                         │
│  🟣 書類選考                [↑][↓] [編集] [タスク] [削除]   │
│      グループ: 選考        ✅ アクティブ                   │
│                                                         │
│  🟠 会社説明会              [↑][↓] [編集] [タスク] [削除]   │
│      グループ: インターン    ✅ アクティブ                   │
│                                                         │
│  ⚫ 適性検査                [↑][↓] [編集] [タスク] [削除]   │
│      グループ: 選考        ❌ 無効                        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 機能
- 段階の一覧表示
- ドラッグ&ドロップによる順序変更
- 段階の追加・編集・削除
- 有効/無効の切り替え
- タスク管理・ステータス管理への遷移

### コンポーネント構成
```typescript
// StageConfigPage.tsx
├── StageList
│   ├── StageListItem
│   │   ├── StageInfo
│   │   ├── StageActions
│   │   └── DragHandle
│   └── AddStageButton
├── StageEditDialog
└── StageDeleteConfirmDialog
```

## 3. 段階編集ダイアログ

**コンポーネント**: `StageEditDialog.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ 選考段階編集                                    [✕ 閉じる] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  基本情報                                                │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ 段階名称    [書類選考                            ]  │  │
│  │ 表示名      [書類選考                            ]  │  │
│  │ 説明        [履歴書・職務経歴書等の書類審査        ]  │  │
│  │            [                                    ]  │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  グループ・分類                                           │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ 段階グループ  [選考        ▼]                       │  │
│  │ 色スキーム    [🟣 Purple  ▼]                       │  │
│  │ アイコン      [📄 Document ▼]                      │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  セッション設定                                           │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ □ セッション予約が必要                                │  │
│  │ セッション形式 ☑ 対面 ☑ オンライン □ ハイブリッド    │  │
│  │ 推定所要時間  [60] 分                               │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│                               [キャンセル] [保存]        │
└─────────────────────────────────────────────────────────┘
```

## 4. タスク管理ページ

**URL**: `/system-config/stages/:stageId/tasks`  
**ファイル**: `src/features/system-config/pages/TaskConfigPage.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ タスク管理 - 書類選考                        [+ タスク追加] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  1. 📧 詳細連絡                    [↑][↓] [編集] [削除]   │
│     タイプ: メール送信  ✅ 必須   期限: 1日後             │
│                                                         │
│  2. 📄 提出書類                    [↑][↓] [編集] [削除]   │
│     タイプ: 書類提出   ✅ 必須   期限: 7日後             │
│                                                         │
│  3. 📞 結果連絡                    [↑][↓] [編集] [削除]   │
│     タイプ: 連絡      ✅ 必須   期限: 指定なし           │
│                                                         │
│                                                         │
│  [← 段階一覧に戻る]                                      │
└─────────────────────────────────────────────────────────┘
```

### 機能
- タスクの一覧表示
- タスクの追加・編集・削除
- ドラッグ&ドロップによる順序変更
- 必須/任意の設定
- 期限設定

## 5. タスク編集ダイアログ

**コンポーネント**: `TaskEditDialog.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ タスク編集                                     [✕ 閉じる] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  基本情報                                                │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ タスク名     [詳細連絡                           ]  │  │
│  │ 表示名       [詳細連絡                           ]  │  │
│  │ 説明         [書類選考の詳細と提出方法を案内する   ]  │  │
│  │             [                                    ]  │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  タスク設定                                               │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ タスクタイプ  [メール送信    ▼]                     │  │
│  │ ☑ 必須タスク                                       │  │
│  │ ☑ アクティブ                                       │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  期限設定                                                 │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ ○ 期限なし                                          │  │
│  │ ● 相対期限  [1] 日後                               │  │
│  │ ○ 固定期限  [2024/01/01] から                      │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  メール設定（メール送信タイプの場合）                      │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ テンプレート  [書類選考詳細連絡  ▼]                 │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│                               [キャンセル] [保存]        │
└─────────────────────────────────────────────────────────┘
```

## 6. ステータス管理ページ

**URL**: `/system-config/stages/:stageId/statuses`  
**ファイル**: `src/features/system-config/pages/StatusConfigPage.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ ステータス管理 - 書類選考                  [+ ステータス追加] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  🟢 合格                      [↑][↓] [編集] [削除]       │
│      分類: 通過 (passed)      最終: いいえ                │
│                                                         │
│  🔴 不合格                    [↑][↓] [編集] [削除]       │
│      分類: 不通過 (failed)    最終: はい                 │
│                                                         │
│  🟡 保留                      [↑][↓] [編集] [削除]       │
│      分類: 保留 (pending)     最終: いいえ                │
│                                                         │
│  ⚫ 辞退                      [↑][↓] [編集] [削除]       │
│      分類: 辞退 (declined)    最終: はい                 │
│                                                         │
│                                                         │
│  [← 段階一覧に戻る]                                      │
└─────────────────────────────────────────────────────────┘
```

### 機能
- ステータスの一覧表示
- ステータスの追加・編集・削除
- ドラッグ&ドロップによる順序変更
- 分類設定（passed/failed/pending/declined/cancelled）
- 最終ステータスの設定

## 7. ステータス編集ダイアログ

**コンポーネント**: `StatusEditDialog.tsx`

### レイアウト
```
┌─────────────────────────────────────────────────────────┐
│ ステータス編集                                  [✕ 閉じる] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  基本情報                                                │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ ステータス値  [合格                             ]  │  │
│  │ 表示名        [合格                             ]  │  │
│  │ 説明          [書類選考を通過                    ]  │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│  分類・設定                                               │
│  ┌─────────────────────────────────────────────────────┐  │
│  │ ステータス分類 [通過 (passed)    ▼]                │  │
│  │ 色スキーム     [🟢 Green        ▼]                │  │
│  │ ☑ アクティブ                                       │  │
│  │ ☑ 最終ステータス（これ以降進行しない）              │  │
│  └─────────────────────────────────────────────────────┘  │
│                                                         │
│                               [キャンセル] [保存]        │
└─────────────────────────────────────────────────────────┘
```

## コンポーネント構造

```typescript
src/features/system-config/
├── pages/
│   ├── SystemConfigIndexPage.tsx      # 設定トップ
│   ├── StageConfigPage.tsx            # 選考段階管理
│   ├── TaskConfigPage.tsx             # タスク管理
│   └── StatusConfigPage.tsx           # ステータス管理
├── components/
│   ├── stages/
│   │   ├── StageList.tsx
│   │   ├── StageListItem.tsx
│   │   ├── StageEditDialog.tsx
│   │   └── StageDeleteConfirmDialog.tsx
│   ├── tasks/
│   │   ├── TaskList.tsx
│   │   ├── TaskListItem.tsx
│   │   ├── TaskEditDialog.tsx
│   │   └── TaskDeleteConfirmDialog.tsx
│   ├── statuses/
│   │   ├── StatusList.tsx
│   │   ├── StatusListItem.tsx
│   │   ├── StatusEditDialog.tsx
│   │   └── StatusDeleteConfirmDialog.tsx
│   └── common/
│       ├── DragDropList.tsx           # 共通D&Dコンポーネント
│       ├── ColorSchemeSelect.tsx      # 色選択
│       ├── IconSelect.tsx             # アイコン選択
│       └── ConfigSummaryCard.tsx      # 設定サマリー
├── hooks/
│   ├── useStageConfig.ts              # 段階設定フック
│   ├── useTaskConfig.ts               # タスク設定フック
│   ├── useStatusConfig.ts             # ステータス設定フック
│   └── useDragDrop.ts                 # D&D共通フック
└── types/
    ├── stageConfig.ts                 # 段階設定型定義
    ├── taskConfig.ts                  # タスク設定型定義
    └── statusConfig.ts                # ステータス設定型定義
```

## ナビゲーション

### ヘッダーメニューへの追加
```typescript
// src/shared/components/layout/Header.tsx に追加
const navigationItems = [
  // 既存項目...
  {
    name: 'システム設定',
    href: '/system-config',
    icon: SettingsIcon,
    requiresAuth: true,
    adminOnly: true // 管理者のみ表示
  }
];
```

### ブレッドクラム
各ページでのブレッドクラム表示例：
- `システム設定`
- `システム設定 > 選考段階管理`
- `システム設定 > 選考段階管理 > 書類選考のタスク`
- `システム設定 > 選考段階管理 > 書類選考のステータス`

## レスポンシブ対応

### モバイル表示
- リスト項目を縦に並べて表示
- 編集・削除ボタンをスワイプアクションで表示
- ダイアログはフルスクリーン表示

### タブレット表示  
- 2カラムレイアウト（一覧＋詳細）
- タッチ操作でのドラッグ&ドロップ対応

## バリデーション

### 入力チェック
- 必須項目の入力チェック
- 重複名称のチェック
- 循環参照のチェック
- 文字数制限チェック

### 整合性チェック
- 既存データとの整合性確認
- 使用中の設定項目の削除防止
- 段階順序の論理チェック

この構成により、直感的で使いやすい設定管理機能を提供できます。